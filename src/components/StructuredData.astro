---
interface Props {
  type: 'portfolio' | 'project' | 'homepage';
  data?: any;
}

const { type, data } = Astro.props;

// Portfolio/Person Schema for Omar Torres
const getPortfolioSchema = () => ({
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Omar Torres",
  "alternateName": "Omar Torres",
  "description": "Data & AI Enthusiast, Full-Stack Developer, and Machine Learning Engineer specializing in modern web technologies and artificial intelligence solutions.",
  "jobTitle": "Data & AI Enthusiast",
  "knowsAbout": [
    "Machine Learning",
    "Artificial Intelligence",
    "Full-Stack Development",
    "Web Development",
    "Data Science",
    "Computer Vision",
    "Deep Learning",
    "Python",
    "JavaScript",
    "TypeScript"
  ],
  "skill": [
    "Machine Learning",
    "Artificial Intelligence",
    "Full-Stack Development",
    "Python",
    "JavaScript",
    "TypeScript",
    "React",
    "Astro",
    "TensorFlow",
    "Computer Vision"
  ],
  "alumniOf": [],
  "sameAs": [
    "https://bizkit.dev",
    "https://github.com/omarbizkit"
  ],
  "email": "omarbizkit@hotmail.com",
  "address": {
    "@type": "PostalAddress",
    "addressCountry": "US"
  },
  "url": "https://bizkit.dev",
  "hasOccupation": {
    "@type": "Occupation",
    "name": "Data Scientist and AI Engineer",
    "occupationalCategory": "Information Technology"
  }
});

// Individual Project Schema
const getProjectSchema = (project: any) => ({
  "@context": "https://schema.org",
  "@type": "CreativeWork",
  "name": project.name,
  "description": project.description,
  "creator": {
    "@type": "Person",
    "name": "Omar Torres",
    "url": "https://bizkit.dev"
  },
  "programmingLanguage": project.technologies || [],
  "isBasedOn": {
    "@type": "WebSite",
    "name": "bizkit.dev",
    "url": "https://bizkit.dev"
  },
  "dateCreated": project.createdDate,
  "genre": ["Data Science", "Machine Learning", "Artificial Intelligence", "Web Development"],
  "keywords": project.technologies?.join(", ") || "",
  "license": "MIT",
  "usageInfo": `Live project available at: https://bizkit.dev/projects/${project.id}`,
  "offers": project.status === "live" ? {
    "@type": "Offer",
    "url": project.launchUrl,
    "availability": "https://schema.org/InStock"
  } : undefined
});

// Homepage Organization Schema
const getHomepageSchema = () => ({
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "bizkit.dev",
  "alternateName": "Omar Torres Portfolio",
  "description": "Professional portfolio of Omar Torres, showcasing innovative projects in Data Science, AI, and Machine Learning. Explore cutting-edge solutions in web development, machine learning models, and artificial intelligence applications.",
  "url": "https://bizkit.dev",
  "creator": {
    "@type": "Person",
    "name": "Omar Torres"
  },
  "publisher": {
    "@type": "Person",
    "name": "Omar Torres",
    "jobTitle": "Data & AI Enthusiast"
  },
  "author": {
    "@type": "Person",
    "name": "Omar Torres"
  },
  "isPartOf": {
    "@type": "WebSite",
    "@id": "https://bizkit.dev#WebSite"
  },
  "mainEntity": {
    "@type": "ItemList",
    "name": "Featured Projects",
    "description": "Showcase of innovative AI and development projects by Omar Torres"
  },
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://bizkit.dev"
      }
    ]
  }
});

// Breadcrumb Navigation Schema
const getBreadcrumbSchema = (projectName?: string) => {
  const breadcrumbs = [
    { position: 1, name: "Home", item: "https://bizkit.dev" }
  ];

  if (projectName) {
    breadcrumbs.push({
      position: 2,
      name: projectName,
      item: `https://bizkit.dev/projects/${projectName.toLowerCase().replace(/\s+/g, '-')}`
    });
  }

  return {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": breadcrumbs.map(crumb => ({
      "@type": "ListItem",
      "position": crumb.position,
      "name": crumb.name,
      "item": crumb.item
    }))
  };
};

// FAQ Page Schema (for potential future use)
const getFAQSchema = () => ({
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What technologies do you specialize in?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "I specialize in Machine Learning, Artificial Intelligence, Python, JavaScript, TypeScript, and modern web development frameworks like React and Astro."
      }
    },
    {
      "@type": "Question",
      "name": "Are your projects available to view?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! Many of my projects are available with live demos. Check out the Projects section to explore and interact with my work."
      }
    }
  ]
});

// Organization Schema
const getOrganizationSchema = () => ({
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "bizkit.dev",
  "alternateName": "Omar Torres Portfolio",
  "description": "Professional portfolio of Omar Torres showcasing innovative Data Science, AI, and Machine Learning projects.",
  "url": "https://bizkit.dev",
  "founder": {
    "@type": "Person",
    "name": "Omar Torres",
    "email": "omarbizkit@hotmail.com"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "email": "omarbizkit@hotmail.com",
    "contactType": "customer support"
  }
});

// Website Schema
const getWebsiteSchema = () => ({
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": "https://bizkit.dev#WebSite",
  "url": "https://bizkit.dev",
  "name": "bizkit.dev",
  "alternateName": "Omar Torres Portfolio",
  "description": "Professional portfolio showcasing innovative Data Science, AI, and Machine Learning projects.",
  "inLanguage": "en-US",
  "copyrightHolder": {
    "@type": "Person",
    "name": "Omar Torres"
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://bizkit.dev?#search={search_term}",
    "query-input": "required name=search_term"
  }
});

const generateSchemas = () => {
  switch (type) {
    case 'homepage':
      return [
        getHomepageSchema(),
        getOrganizationSchema(),
        getWebsiteSchema(),
        getPortfolioSchema(),
        getFAQSchema()
      ];
    case 'project':
      return [
        getProjectSchema(data),
        getBreadcrumbSchema(data?.name),
        getPortfolioSchema(),
        getOrganizationSchema(),
        getWebsiteSchema()
      ];
    case 'portfolio':
      return [
        getPortfolioSchema(),
        getOrganizationSchema(),
        getWebsiteSchema()
      ];
    default:
      return [
        getHomepageSchema(),
        getPortfolioSchema(),
        getOrganizationSchema(),
        getWebsiteSchema()
      ];
  }
};

const allSchemas = generateSchemas();
---

{allSchemas.map((schema, index) => (
  <script
    type="application/ld+json"
    set:html={JSON.stringify(schema)}
    data-schema-id={index}
    data-schema-type={type}
  />
))}