---
export const prerender = true;

import BaseLayout from '../layouts/BaseLayout.astro';
import ModernHero from '../components/ModernHero.astro';
import ProjectGrid from '../components/ProjectGrid.astro';
import projectsData from '../content/projects.json';
import type { Project } from '../types/index.ts';
import StructuredData from '../components/StructuredData.astro';

const projects = projectsData.projects as Project[];
---

<BaseLayout>
  <ModernHero />
  
  <!-- Projects Section -->
  <section id="projects" class="py-20 relative">
    <div class="max-w-7xl mx-auto px-6">
      <div class="text-center mb-16">
        <h2 id="projects-heading" class="text-4xl md:text-5xl font-bold mb-6">
          <span class="bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">
            Featured Projects
          </span>
        </h2>
        <p class="text-xl text-gray-400 max-w-2xl mx-auto">
          A showcase of AI, machine learning, and data science projects with real-world impact.
        </p>
      </div>
      
      <!-- Projects Grid -->
      <ProjectGrid projects={projects} showFilters={true} featuredFirst={true} />
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="py-20 relative">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h2 class="text-4xl md:text-5xl font-bold mb-6">
        <span class="bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">
          Data and AI Enthusiast
        </span>
      </h2>
      <p class="text-xl text-gray-400 mb-8 max-w-2xl mx-auto leading-relaxed">
        Passionate about transforming raw data into actionable insights using cutting-edge machine learning 
        and artificial intelligence technologies. With expertise spanning neural networks, deep learning frameworks, 
        and real-world AI applications, I build solutions that make a meaningful impact.
      </p>
      
      <div class="grid md:grid-cols-3 gap-8 mt-12">
        <div class="bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-lg p-6">
          <div class="text-cyan-400 text-3xl mb-4">🤖</div>
          <h3 class="text-xl font-semibold mb-2 text-white">AI & Machine Learning</h3>
          <p class="text-gray-400">Building intelligent systems with TensorFlow, PyTorch, and custom neural networks.</p>
        </div>
        <div class="bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-lg p-6">
          <div class="text-purple-400 text-3xl mb-4">📊</div>
          <h3 class="text-xl font-semibold mb-2 text-white">Data Science</h3>
          <p class="text-gray-400">Extracting insights from complex datasets using advanced analytics and visualization.</p>
        </div>
        <div class="bg-gray-900/50 backdrop-blur-sm border border-gray-800 rounded-lg p-6">
          <div class="text-pink-400 text-3xl mb-4">🚀</div>
          <h3 class="text-xl font-semibold mb-2 text-white">Innovation</h3>
          <p class="text-gray-400">Creating cutting-edge solutions that push the boundaries of what's possible with AI.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="py-20 relative">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h2 class="text-4xl md:text-5xl font-bold mb-6">
        <span class="bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">
          Let's Connect
        </span>
      </h2>
      <p class="text-xl text-gray-400 mb-12 max-w-2xl mx-auto">
        Ready to transform your data into intelligent solutions? Let's discuss how we can work together.
      </p>
      
      <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
        <!-- Temporary OAuth Test Button -->
        <button
          id="test-signin"
          class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg font-semibold text-white hover:from-green-400 hover:to-blue-500 transition-all duration-300 hover:shadow-lg hover:shadow-green-500/25 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 focus:ring-offset-gray-900"
          aria-label="Test Google OAuth Sign-in"
        >
          🔐 Test Google Sign-In
        </button>

        <a
          href="/subscribe"
          class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg font-semibold text-white hover:from-cyan-400 hover:to-purple-500 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/25 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-gray-900"
          aria-label="Subscribe to newsletter"
        >
          📧 Newsletter Signup
        </a>

        <a
          href="mailto:omarbizkit@hotmail.com"
          class="inline-flex items-center px-8 py-4 border-2 border-gray-600 rounded-lg font-semibold text-gray-300 hover:border-cyan-400 hover:text-cyan-400 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-gray-900"
          aria-label="Send email to Omar Torres"
        >
          📧 Email Contact
        </a>

        <a
          href="https://github.com/omarbizkit"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center px-8 py-4 border-2 border-gray-600 rounded-lg font-semibold text-gray-300 hover:border-cyan-400 hover:text-cyan-400 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-gray-900"
          aria-label="Visit Omar Torres GitHub profile"
        >
          💼 GitHub Profile
        </a>
      </div>
    </div>
  </section>

  <!-- Structured Data for Homepage SEO -->
  <StructuredData type="homepage" />

  <!-- Temporary OAuth Test Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const testButton = document.getElementById('test-signin');
      if (testButton) {
        testButton.addEventListener('click', async () => {
          try {
            testButton.disabled = true;
            testButton.textContent = '🔄 Signing in...';
            
            const response = await fetch('/api/auth/signin', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ redirectTo: '/' })
            });
            
            if (!response.ok) {
              throw new Error('Sign-in failed');
            }
            
            const { url } = await response.json();
            if (url) {
              window.location.href = url;
            }
          } catch (error) {
            console.error('OAuth test error:', error);
            testButton.disabled = false;
            testButton.textContent = '🔐 Test Google Sign-In';
            alert('OAuth test failed: ' + error.message);
          }
        });
      }
    });
  </script>
</BaseLayout>